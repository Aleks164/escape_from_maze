(()=>{"use strict";function t(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function r(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,a=[],i=!0,c=!1;try{for(e=e.call(t);!(i=(n=e.next()).done)&&(a.push(n.value),!r||a.length!==r);i=!0);}catch(t){c=!0,o=t}finally{try{i||null==e.return||e.return()}finally{if(c)throw o}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,r,e,n){var o=n[t].split("");o[r]=e,n[t]=o.join("")}function o(r,o){var a=o.startPosition,i=o.startDirection,c=o.coordList,s=o.currentWay,u=o.listOfCrosses,l=o.prev,p=o.isEscaped,f=o.crossingsParamArray;if(p)return{startPosition:a,startDirection:i,coordList:c,currentWay:s,listOfCrosses:u,crossingsParamArray:f,prev:l,isEscaped:p};var h,v,d,g,y,m=function(t,r,o,a){var i=function(t,r,e){var o=[];return e[t+1]&&" "===e[t+1][r]&&(o.push([t+1,r]),n(t+1,r,"v",e)),e[t-1]&&" "===e[t-1][r]&&(o.push([t-1,r]),n(t-1,r,"^",e))," "===e[t][r+1]&&(o.push([t,r+1]),n(t,r+1,">",e))," "===e[t][r-1]&&(o.push([t,r-1]),n(t,r-1,"<",e)),o}(o,a,t);if(!i.length)return{nextStep:[],nextDirection:"",resultLOg:[]};var c,s,u,l,p,f=e(i[0],2),h=(c=[o,a],s=[f[0],f[1]],l=[],p="",c[0]>s[0]&&(p="^"),c[0]<s[0]&&(p="v"),c[1]>s[1]&&(p="<"),c[1]<s[1]&&(p=">"),(u=r)===p?l.push("F"):">"===u?("<"===p&&l.push("B","F"),"^"===p&&l.push("L","F"),"v"===p&&l.push("R","F")):"<"===u?(">"===p&&l.push("B","F"),"v"===p&&l.push("L","F"),"^"===p&&l.push("R","F")):"v"===u?("^"===p&&l.push("B","F"),"<"===p&&l.push("R","F"),">"===p&&l.push("L","F")):"^"===u&&("v"===p&&l.push("B","F"),">"===p&&l.push("R","F"),"<"===p&&l.push("L","F")),{nextDirection:p,resultLOg:l});return{nextStep:i,nextDirection:h.nextDirection,resultLOg:h.resultLOg}}(r,i,a[0],a[1]),b=m.nextStep,O=m.nextDirection,w=m.resultLOg;if(a[1]===r[0].length-1||a[0]===r.length-1||0===a[0]||0===a[1])return s=s.concat(w),c.push([a[0],a[1]]),f.push(t({},a.toString(),{way:s,from:l,coord:c})),{startPosition:a,startDirection:i,coordList:c,currentWay:s,listOfCrosses:u,crossingsParamArray:f,prev:l,isEscaped:p=!0};if(b.length>1&&"string"!=typeof b){c.push([a[0],a[1]]);var j=b.splice(1,b.length-1);u=u.concat(j),f.push(t({},a.toString(),{way:s,from:l,coord:c})),s=[],c=[],l=a.toString()}if(s=s.concat(w),b.length)c.push([a[0],a[1]]),a=b[0],i=O;else{var L=u.shift();c=[],L&&(a=L,l=(h=i=r[L[0]][L[1]],v=a,d=[],g=v[1],y=v[0],">"===h&&(d=d.concat([y,g-1])),"<"===h&&(d=d.concat([y,g+1])),"^"===h&&(d=d.concat([y+1,g])),"v"===h&&(d=d.concat([y-1,g])),d).toString()),s=[i]}return{startPosition:a,startDirection:i,coordList:c,currentWay:s,listOfCrosses:u,crossingsParamArray:f,prev:l,isEscaped:p}}function a(t){switch(t){case"#":return"wall";case"*":return"shortWayColor";case">":case"<":case"v":case"^":return"steps";case"horizontal":return"horizontal";case"vertical":return"vertical";default:return"empty"}}function i(t){return'<div class="mazeRow"><div class="mazeRow" style="grid-template-columns: repeat('.concat(t[0].length+1,',15px); ">\n  ').concat(Array(t[0].length).fill(0).map((function(t,r){var e="";return 0===r&&(e="<div> </div>"),"".concat(e,"<div  class=").concat(a("vertical"),">").concat(r+1,"</div>")})).join(""),"</div>\n  ").concat(t.map((function(r,e){return'<div class="mazeRow" style="grid-template-columns: repeat('.concat(t[0].length+1,',15px); ">').concat(r.split("").map((function(t,r){var n="";return 0===r&&(n="<div class=".concat(a("horizontal"),">").concat(e+1,"</div>")),"".concat(n,"<div class=").concat(a(t),">").concat(t||".","</div>")})).join(""),"</div>")})).join(""),"</div>")}function c(t){var r=Math.ceil(Math.random()*t);return r%2==0&&r++,0===r&&r++,r>=t&&(r=t-2),r}function s(t,r,n){var o=e(r,2),a=o[0],i=o[1];return r[0]>n[0]&&t[a-1]&&(t[a-1][i]=" "),r[0]<n[0]&&t[a+1]&&(t[a+1][i]=" "),r[1]>n[1]&&t[a][i-1]&&(t[a][i-1]=" "),r[1]<n[1]&&t[a][i+1]&&(t[a][i+1]=" "),t}function u(t,r){var n=e(r,2),o=n[0],a=n[1],i=[];return t[o+2]&&" "===t[o+2][a]&&o+2!==t.length-1&&o+2!==0&&i.push([o+2,a]),t[o-2]&&" "===t[o-2][a]&&o-2!=t.length-1&&o-2!=0&&i.push([o-2,a]),t[o][a+2]&&" "===t[o][a+2]&&a+2!==t[o].length-1&&a+2!==0&&i.push([o,a+2]),t[o][a-2]&&" "===t[o][a-2]&&a-2!=t[o].length-1&&a-2!=0&&i.push([o,a-2]),i}function l(t,r){var e=function(t){for(var r,e,n=[1,1],o=n,a=[n];a.length;){t[o[0]][o[1]]="*";var i=u(t,o);if(0!==i.length){i.length>1&&a.push(o);var l=(void 0,e=(r=i).length,r[Math.floor(Math.random()*e)]);s(t,o,l),o=l}else o=a.shift()}return t[c(t.length)][1]=">",t.map((function(t){return t.join("").replaceAll("*"," ")}))}(function(t,r){var e=2*t+1,n=2*r+1,o=Array(n).fill(""),a=c(n);return o.map((function(t,r,n){return 0===r||r===n.length-1||r%2==0?Array(e).fill("#"):Array(e).fill(" ").map((function(t,n,o){return r===a&&n===e-1?" ":n%2==0||0===n||n===o.length-1?"#":"".concat(t)}))}))}(t,r));return{newMaze:e,mazeMarkup:i(e)}}function p(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function f(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){t(r,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))}))}return r}var h=document.getElementById("heigth"),v=document.getElementById("width"),d=document.getElementById("nextStepButton"),g=document.getElementById("generateNewMaze"),y=document.getElementById("currenSize"),m=document.getElementById("maze"),b=+h.value,O=+v.value,w=l(b,O),j=w.newMaze,L=w.mazeMarkup,P=j;m&&(m.innerHTML=L),y.innerHTML="height: ".concat(b," x width: ").concat(O),g.addEventListener("click",(function(){var t=l(b,O);!function(t,r){t&&(t.innerHTML=r)}(m,t.mazeMarkup),P=t.newMaze})),d.addEventListener("click",(function(){d.disabled=!0;for(var t=f(f(f({},function(t){for(var r=0,e=0,n=["<","^",">","v"],o="",a=0;a<t.length;a++)for(var i=0;i<t[a].length;i++){if(n.indexOf(t[a][i])>=0){r=i,e=a,o=t[a][i];break}if(o)break}return{startPosition:[e,r],startDirection:o}}(P)),{coordList:[],currentWay:[],listOfCrosses:[],crossingsParamArray:[{start:{way:[],from:null,coord:[]}}],prev:"start"}),{},{isEscaped:!1});;){console.log(t.isEscaped),t=o(P,t);var r=i(P);m&&(m.innerHTML=r)}d.disabled=!1}))})();