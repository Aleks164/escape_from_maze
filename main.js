(()=>{"use strict";function t(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function n(n,e){if(n){if("string"==typeof n)return t(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(n,e):void 0}}function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var r,o,i=[],a=!0,u=!1;try{for(e=e.call(t);!(a=(r=e.next()).done)&&(i.push(r.value),!n||i.length!==n);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==e.return||e.return()}finally{if(u)throw o}}return i}}(t,e)||n(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function o(t){return'<div class="mazeContainer">'.concat(t.map((function(n){return'<div class="mazeRow" style="grid-template-columns: repeat('.concat(t[0].length,',10px); ">').concat(n.split("").map((function(t){return"<div>".concat(t||".","</div>")})).join(""),"</div>")})).join(""),"</div>")}function i(e){return function(n){if(Array.isArray(n))return t(n)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t){var n=Math.ceil(Math.random()*t);return n%2==0&&n++,0===n&&n++,n>=t&&(n=t-2),n}function u(t,n,r){var o=e(n,2),i=o[0],a=o[1];return n[0]>r[0]&&t[i-1]&&(t[i-1][a]=" "),n[0]<r[0]&&t[i+1]&&(t[i+1][a]=" "),n[1]>r[1]&&t[i][a-1]&&(t[i][a-1]=" "),n[1]<r[1]&&t[i][a+1]&&(t[i][a+1]=" "),t}function c(t,n){var r=e(n,2),o=r[0],i=r[1],a=[];return t[o+2]&&" "===t[o+2][i]&&o+2!==t.length-1&&o+2!==0&&a.push([o+2,i]),t[o-2]&&" "===t[o-2][i]&&o-2!=t.length-1&&o-2!=0&&a.push([o-2,i]),t[o][i+2]&&" "===t[o][i+2]&&i+2!==t[o].length-1&&i+2!==0&&a.push([o,i+2]),t[o][i-2]&&" "===t[o][i-2]&&i-2!=t[o].length-1&&i-2!=0&&a.push([o,i-2]),a}function l(t,n){var l,s=function(t){for(var n,e,r=[1,1],o=r,i=[r];i.length;){t[o[0]][o[1]]="*";var l=c(t,o);if(0!==l.length){l.length>1&&i.push(o);var s=(void 0,e=(n=l).length,n[Math.floor(Math.random()*e)]);u(t,o,s),o=s}else o=i.shift()}return t[a(t.length)][1]=">",t.map((function(t){return t.join("").replaceAll("*"," ")}))}(function(t,n){var e=2*t+1,r=2*n+1,o=Array(r).fill(""),i=a(r);return o.map((function(t,n,r){return 0===n||n===r.length-1||n%2==0?Array(e).fill("#"):Array(e).fill(" ").map((function(t,r,o){return n===i&&r===e-1?" ":r%2==0||0===r||r===o.length-1?"#":"".concat(t)}))}))}(t,n)),f=s.slice(),h=[0,0],p="",v=[],d=[],g=[],m=[{start:{way:[],from:null,coord:[]}}],y="start",b=document.getElementById("maze"),L=document.getElementById("curWay"),S=o(f);b&&(b.innerHTML=S);var I=function(t){for(var n=0,e=0,r=["<","^",">","v"],o="",i=0;i<t.length;i++)for(var a=0;a<t[i].length;a++){if(r.indexOf(t[i][a])>=0){n=a,e=i,o=t[i][a];break}if(o)break}return{startPosition:[e,n],startDirection:o}}(f);h=I.startPosition,p=I.startDirection;var w=document.getElementById("nextStepButton");w.addEventListener("click",(function(){w.disabled=!0,l=setInterval((function(){!function(){var t=function(t,n,r,o){var i=function(t,n,e){function r(t,n,r){var o=e[t].split("");o[n]=r,e[t]=o.join("")}var o=[];return e[t+1]&&" "===e[t+1][n]&&(o.push([t+1,n]),r(t+1,n,"v")),e[t-1]&&" "===e[t-1][n]&&(o.push([t-1,n]),r(t-1,n,"^"))," "===e[t][n+1]&&(o.push([t,n+1]),r(t,n+1,">"))," "===e[t][n-1]&&(o.push([t,n-1]),r(t,n-1,"<")),o}(r,o,t);if(!i.length)return{nextStep:[],nextDirection:"",resultLOg:[]};var a=e(i[0],2),u=function(t,n,e){var r=[],o="";return t[0]>n[0]&&(o="^"),t[0]<n[0]&&(o="v"),t[1]>n[1]&&(o="<"),t[1]<n[1]&&(o=">"),e===o?r.push("F"):">"===e?("<"===o&&r.push("B","F"),"^"===o&&r.push("L","F"),"v"===o&&r.push("R","F")):"<"===e?(">"===o&&r.push("B","F"),"v"===o&&r.push("L","F"),"^"===o&&r.push("R","F")):"v"===e?("^"===o&&r.push("B","F"),"<"===o&&r.push("R","F"),">"===o&&r.push("L","F")):"^"===e&&("v"===o&&r.push("B","F"),">"===o&&r.push("R","F"),"<"===o&&r.push("L","F")),{nextDirection:o,resultLOg:r}}([r,o],[a[0],a[1]],n);return{nextStep:i,nextDirection:u.nextDirection,resultLOg:u.resultLOg}}(f,p,h[0],h[1]),n=t.nextStep,a=t.nextDirection,u=t.resultLOg;if(h[1]!==f[0].length-1&&h[0]!==f.length-1&&0!==h[0]&&0!==h[1]){if(n.length>1&&"string"!=typeof n){v.push([h[0],h[1]]);var c=n.splice(1,n.length-1);g=g.concat(c),m.push(r({},h.toString(),{way:d,from:y,coord:v})),d=[],v=[],y=h.toString()}if(d=d.concat(u),n.length)v.push([h[0],h[1]]),h=n[0],p=a;else{var I=g.shift();v=[],I&&(h=I,p=f[I[0]][I[1]],y=(w=p,x=h,j=[],A=x[1],F=x[0],">"===w&&(j=j.concat([F,A-1])),"<"===w&&(j=j.concat([F,A+1])),"^"===w&&(j=j.concat([F+1,A])),"v"===w&&(j=j.concat([F-1,A])),j).toString()),d=[p]}var w,x,j,A,F;S=o(f),b&&(b.innerHTML=S),L&&(L.innerHTML="<div>".concat(v.join(" "),"</div>"))}else{console.log("here!!!"),d=d.concat(u),v.push([h[0],h[1]]),m.push(r({},h.toString(),{way:d,from:y,coord:v})),clearInterval(l);var B=function(t){for(var n=t.pop(),e=Object.keys(n)[0],r=n[e].from,o=n[e].coord,a=i(o);r;)n=t.find((function(t){return t[r]})),e=Object.keys(n)[0],r=n[e].from,o=n[e].coord,a.unshift.apply(a,i(o));return a}(m),M=setInterval((function(){if(B.length){var t=e(B.shift(),2),n=t[0],r=t[1],i=s[n].split("");i[r]="*",s[n]=i.join(""),S=o(s),b&&(b.innerHTML=S)}else clearInterval(M)}),50)}}()}),50),w.disabled=!1}))}var s=document.getElementById("heigth"),f=document.getElementById("width"),h=document.getElementById("generateNewMaze"),p=document.getElementById("currenSize"),v=+s.value,d=+f.value;p.innerHTML="height: ".concat(v," x width: ").concat(d),l(v,d),h.addEventListener("click",(function(){v=+s.value,d=+f.value,l(v,d),p.innerHTML="height: ".concat(v," x width: ").concat(d)}))})();