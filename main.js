(()=>{"use strict";var t,e={m:{},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},u:t=>t+".js",o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),p:"/task-calendar/"};function r(t,e){t&&(t.innerHTML=e)}function n(){var t=document.getElementById("heigth"),e=document.getElementById("width");return{height:+t.value,width:+e.value}}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a=[],i=!0,c=!1;try{for(r=r.call(t);!(i=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(t){c=!0,o=t}finally{try{i||null==r.return||r.return()}finally{if(c)throw o}}return a}}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e,r,n){var o=n[t].split("");o[e]=r,n[t]=o.join("")}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function p(t,e){var r=e.startPosition,n=e.startDirection,a=e.coordList,i=e.currentWay,u=e.listOfCrosses,p=e.prev,f=e.isEscaped,d=e.crossingsParamArray;if(f)return e;var y,h,v,g,m,b=function(t,e,r,n){var o=function(t,e,r){var n=[];return r[t+1]&&" "===r[t+1][e]&&(n.push([t+1,e]),s(t+1,e,"v",r)),r[t-1]&&" "===r[t-1][e]&&(n.push([t-1,e]),s(t-1,e,"^",r))," "===r[t][e+1]&&(n.push([t,e+1]),s(t,e+1,">",r))," "===r[t][e-1]&&(n.push([t,e-1]),s(t,e-1,"<",r)),n}(r,n,t);if(!o.length)return{nextStep:[],nextDirection:"",resultLOg:[]};var a,i,u,l,p,f=c(o[0],2),d=(a=[r,n],i=[f[0],f[1]],l=[],p=">",a[0]>i[0]&&(p="^"),a[0]<i[0]&&(p="v"),a[1]>i[1]&&(p="<"),a[1]<i[1]&&(p=">"),(u=e)===p?l.push("F"):">"===u?("<"===p&&l.push("B","F"),"^"===p&&l.push("L","F"),"v"===p&&l.push("R","F")):"<"===u?(">"===p&&l.push("B","F"),"v"===p&&l.push("L","F"),"^"===p&&l.push("R","F")):"v"===u?("^"===p&&l.push("B","F"),"<"===p&&l.push("R","F"),">"===p&&l.push("L","F")):"^"===u&&("v"===p&&l.push("B","F"),">"===p&&l.push("R","F"),"<"===p&&l.push("L","F")),{nextDirection:p,resultLOg:l});return{nextStep:o,nextDirection:d.nextDirection,resultLOg:d.resultLOg}}(t,n,r[0],r[1]),O=b.nextStep,w=b.nextDirection,j=b.resultLOg;if(r[1]===t[0].length-1||r[0]===t.length-1||0===r[0]||0===r[1])return i=i.concat(j),a.push([r[0],r[1]]),d.push(o({},r.toString(),{way:i,from:p,coord:a})),f=!0,l(l({},e),{},{coordList:a,currentWay:i,crossingsParamArray:d,isEscaped:f});if(O.length>1&&"string"!=typeof O){a.push([r[0],r[1]]);var E=O.splice(1,O.length-1);u=u.concat(E),d.push(o({},r.toString(),{way:i,from:p,coord:a})),i=[],a=[],p=r.toString()}if(i=i.concat(j),O.length)a.push([r[0],r[1]]),r=c(O,1)[0],n=w;else{var P=u.shift();a=[],P&&(r=P,p=(y=n=t[P[0]][P[1]],h=r,v=[],g=h[1],m=h[0],">"===y&&(v=v.concat([m,g-1])),"<"===y&&(v=v.concat([m,g+1])),"^"===y&&(v=v.concat([m+1,g])),"v"===y&&(v=v.concat([m-1,g])),v).toString()),i=[n]}return{startPosition:r,startDirection:n,coordList:a,currentWay:i,listOfCrosses:u,crossingsParamArray:d,prev:p,isEscaped:f}}function f(t){switch(t){case"#":return"wall";case"*":return"shortWayColor";case">":case"<":case"v":case"^":return"steps";case"horizontal":return"horizontal";case"vertical":return"vertical";default:return"empty"}}function d(t){return'<div class="mazeRow"><div class="mazeRow" style="grid-template-columns: repeat('.concat(t[0].length+1,',15px); ">\n  ').concat(Array(t[0].length).fill(0).map((function(t,e){var r="";return 0===e&&(r="<div> </div>"),"".concat(r,"<div  class=").concat(f("vertical"),">").concat(e+1,"</div>")})).join(""),"</div>\n  ").concat(t.map((function(e,r){return'<div class="mazeRow" style="grid-template-columns: repeat('.concat(t[0].length+1,',15px); ">').concat(e.split("").map((function(t,e){var n="";return 0===e&&(n="<div class=".concat(f("horizontal"),">").concat(r+1,"</div>")),"".concat(n,"<div class=").concat(f(t),">").concat(t||".","</div>")})).join(""),"</div>")})).join(""),"</div>")}function y(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}e.b=document.baseURI||self.location.href,e.d({},{f:()=>P}),function(t){t.DRAW_ESCAPING="drawEscaping",t.DRAW_NEW_MAZE="drawNewMaze"}(t||(t={}));var g,m,b,O,w,j=document.getElementById("start"),E=document.getElementById("generateNewMaze"),P=document.getElementById("maze"),A=new Worker(new URL(e.p+e.u(993),e.b));A.onmessage=function(e){var o=e.data,a=o.newMaze,i=o.mazeMarkup,s=o.type;switch(console.log(a,i,s),s){case t.DRAW_NEW_MAZE:var u=n();!function(t,e){document.getElementById("currenSize").innerHTML="height: ".concat(t," x width: ").concat(e)}(u.height,u.width),r(P,i),j.disabled=!1;break;case t.DRAW_ESCAPING:!function(t,e,r){for(var n=function(t){for(var e=["<","^",">","v"],r=[0,0],n="",o=0;o<t.length;o++)for(var a=0;a<t[o].length;a++){if(e.indexOf(t[o][a])>=0){r=[o,a],n=t[o][a];break}if(n)break}return{startPosition:r,startDirection:n}}(t),o=v(v(v({},n),{coordList:[],currentWay:[],listOfCrosses:[],crossingsParamArray:[{start:{way:[],from:null,coord:[]}}],prev:"start"}),{},{isEscaped:!1});!o.isEscaped;){o=p(t,o);var a=d(t);e&&(e.innerHTML=a)}o.isEscaped&&function(t,e,r,n){var o=function(t){for(var e=t.pop(),r=Object.keys(e)[0],n=e[r].from,o=e[r].coord,a=y(o);n;)e=t.find((function(t){return!!n&&t[n]})),r=Object.keys(e)[0],n=e[r].from,o=e[r].coord,a.unshift.apply(a,y(o));return a}(t),a=setInterval((function(){if(!o.length)return clearInterval(a),void(n.disabled=!1);var t=c(o.shift(),2),i=t[0],s=t[1],u=r[i].split("");u[s]="*",r[i]=u.join("");var l=d(r);e&&(e.innerHTML=l)}),25)}(o.crossingsParamArray,e,window.structuredClone(t),r)}(a,P,E)}},g=(O=n()).height,m=O.width,b=2*g+1,w=Array(2*m+1).fill("").map((function(t,e){return Array(b).fill(" ").map((function(t,r){return r%2!=0&&e%2!=0||r%2==0&&e%2==0?"#":" "})).join("")})),r(P,d(w)),A.postMessage({mazeParams:n(),type:t.DRAW_NEW_MAZE}),E.addEventListener("click",(function(){A.postMessage({mazeParams:n(),type:t.DRAW_NEW_MAZE})})),j.addEventListener("click",(function(){j.disabled=!0,E.disabled=!0,A.postMessage({type:t.DRAW_ESCAPING})}))})();