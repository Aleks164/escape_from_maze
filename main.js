(()=>{"use strict";function t(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function n(t){throw new TypeError('"'+t+'" is read-only')}function r(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}function e(t,n){if(t){if("string"==typeof t)return r(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(t,n):void 0}}function o(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var e,o,a=[],i=!0,c=!1;try{for(r=r.call(t);!(i=(e=r.next()).done)&&(a.push(e.value),!n||a.length!==n);i=!0);}catch(t){c=!0,o=t}finally{try{i||null==r.return||r.return()}finally{if(c)throw o}}return a}}(t,n)||e(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,n,r,e){var o=e[t].split("");o[n]=r,e[t]=o.join("")}function i(t){switch(t){case"#":return"wall";case"*":return"shortWayColor";case">":case"<":case"v":case"^":return"steps";case"horizontal":return"horizontal";case"vertical":return"vertical";default:return"empty"}}function c(t){return'<div class="mazeRow"><div class="mazeRow" style="grid-template-columns: repeat('.concat(t[0].length+1,',15px); ">\n  ').concat(Array(t[0].length).fill(0).map((function(t,n){var r="";return 0===n&&(r="<div> </div>"),"".concat(r,"<div  class=").concat(i("vertical"),">").concat(n+1,"</div>")})).join(""),"</div>\n  ").concat(t.map((function(n,r){return'<div class="mazeRow" style="grid-template-columns: repeat('.concat(t[0].length+1,',15px); ">').concat(n.split("").map((function(t,n){var e="";return 0===n&&(e="<div class=".concat(i("horizontal"),">").concat(r+1,"</div>")),"".concat(e,"<div class=").concat(i(t),">").concat(t||".","</div>")})).join(""),"</div>")})).join(""),"</div>")}function u(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||e(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(r,e){var i=function(t){for(var n=0,r=0,e=["<","^",">","v"],o="",a=0;a<t.length;a++)for(var i=0;i<t[a].length;i++){if(e.indexOf(t[a][i])>=0){n=i,r=a,o=t[a][i];break}if(o)break}return{startPosition:[r,n],startDirection:o}}(r),l=i.startPosition,s=i.startDirection;if(!e){var f,h,p,v,d,m=function(t,n,r,e){var i=function(t,n,r){var e=[];return r[t+1]&&" "===r[t+1][n]&&(e.push([t+1,n]),a(t+1,n,"v",r)),r[t-1]&&" "===r[t-1][n]&&(e.push([t-1,n]),a(t-1,n,"^",r))," "===r[t][n+1]&&(e.push([t,n+1]),a(t,n+1,">",r))," "===r[t][n-1]&&(e.push([t,n-1]),a(t,n-1,"<",r)),e}(r,e,t);if(!i.length)return{nextStep:[],nextDirection:"",resultLOg:[]};var c,u,l,s,f,h=o(i[0],2),p=(c=[r,e],u=[h[0],h[1]],s=[],f="",c[0]>u[0]&&(f="^"),c[0]<u[0]&&(f="v"),c[1]>u[1]&&(f="<"),c[1]<u[1]&&(f=">"),(l=n)===f?s.push("F"):">"===l?("<"===f&&s.push("B","F"),"^"===f&&s.push("L","F"),"v"===f&&s.push("R","F")):"<"===l?(">"===f&&s.push("B","F"),"v"===f&&s.push("L","F"),"^"===f&&s.push("R","F")):"v"===l?("^"===f&&s.push("B","F"),"<"===f&&s.push("R","F"),">"===f&&s.push("L","F")):"^"===l&&("v"===f&&s.push("B","F"),">"===f&&s.push("R","F"),"<"===f&&s.push("L","F")),{nextDirection:f,resultLOg:s});return{nextStep:i,nextDirection:p.nextDirection,resultLOg:p.resultLOg}}(r,s,l[0],l[1]),y=m.nextStep,g=(m.nextDirection,m.resultLOg);if(l[1]===r[0].length-1||l[0]===r.length-1||0===l[0]||0===l[1])return currentWay=currentWay.concat(g),coordList.push([l[0],l[1]]),crossingsParamArray.push(t({},l.toString(),{way:currentWay,from:prev,coord:coordList})),function(t,n,r){var e=function(t){for(var n=t.pop(),r=Object.keys(n)[0],e=n[r].from,o=n[r].coord,a=u(o);e;)n=t.find((function(t){return t[e]})),r=Object.keys(n)[0],e=n[r].from,o=n[r].coord,a.unshift.apply(a,u(o));return a}(t),a=setInterval((function(){if(console.log(a),e.length){var t=o(e.shift(),2),i=t[0],u=t[1],l=r[i].split("");l[u]="*",r[i]=l.join("");var s=c(r);n&&(n.innerHTML=s)}else clearInterval(a)}),25)}(g),void(e=!0);if(y.length>1&&"string"!=typeof y){coordList.push([l[0],l[1]]);var b=y.splice(1,y.length-1);listOfCrosses=listOfCrosses.concat(b),crossingsParamArray.push(t({},l.toString(),{way:currentWay,from:prev,coord:coordList})),currentWay=[],coordList=[],prev=l.toString()}if(currentWay=currentWay.concat(g),y.length)coordList.push([l[0],l[1]]),y[0],n("startPosition"),n("startDirection");else{var L=listOfCrosses.shift();coordList=[],L&&(n("startPosition"),r[L[0]][L[1]],n("startDirection"),prev=(f=s,h=l,p=[],v=h[1],d=h[0],">"===f&&(p=p.concat([d,v-1])),"<"===f&&(p=p.concat([d,v+1])),"^"===f&&(p=p.concat([d+1,v])),"v"===f&&(p=p.concat([d-1,v])),p).toString()),currentWay=[s]}mazeContent=c(r),mazeEl&&(mazeEl.innerHTML=mazeContent)}}function s(t){var n=Math.ceil(Math.random()*t);return n%2==0&&n++,0===n&&n++,n>=t&&(n=t-2),n}function f(t,n,r){var e=o(n,2),a=e[0],i=e[1];return n[0]>r[0]&&t[a-1]&&(t[a-1][i]=" "),n[0]<r[0]&&t[a+1]&&(t[a+1][i]=" "),n[1]>r[1]&&t[a][i-1]&&(t[a][i-1]=" "),n[1]<r[1]&&t[a][i+1]&&(t[a][i+1]=" "),t}function h(t,n){var r=o(n,2),e=r[0],a=r[1],i=[];return t[e+2]&&" "===t[e+2][a]&&e+2!==t.length-1&&e+2!==0&&i.push([e+2,a]),t[e-2]&&" "===t[e-2][a]&&e-2!=t.length-1&&e-2!=0&&i.push([e-2,a]),t[e][a+2]&&" "===t[e][a+2]&&a+2!==t[e].length-1&&a+2!==0&&i.push([e,a+2]),t[e][a-2]&&" "===t[e][a-2]&&a-2!=t[e].length-1&&a-2!=0&&i.push([e,a-2]),i}function p(t,n){var r=function(t){for(var n,r,e=[1,1],o=e,a=[e];a.length;){t[o[0]][o[1]]="*";var i=h(t,o);if(0!==i.length){i.length>1&&a.push(o);var c=(void 0,r=(n=i).length,n[Math.floor(Math.random()*r)]);f(t,o,c),o=c}else o=a.shift()}return t[s(t.length)][1]=">",t.map((function(t){return t.join("").replaceAll("*"," ")}))}(function(t,n){var r=2*t+1,e=2*n+1,o=Array(e).fill(""),a=s(e);return o.map((function(t,n,e){return 0===n||n===e.length-1||n%2==0?Array(r).fill("#"):Array(r).fill(" ").map((function(t,e,o){return n===a&&e===r-1?" ":e%2==0||0===e||e===o.length-1?"#":"".concat(t)}))}))}(t,n));return{newMaze:r,mazeMarkup:c(r)}}var v=document.getElementById("heigth"),d=document.getElementById("width"),m=document.getElementById("nextStepButton"),y=document.getElementById("generateNewMaze"),g=document.getElementById("currenSize"),b=document.getElementById("maze"),L=+v.value,w=+d.value,z=p(L,w),M=z.newMaze,S=z.mazeMarkup,A=M;b&&(b.innerHTML=S),g.innerHTML="height: ".concat(L," x width: ").concat(w),y.addEventListener("click",(function(){var t=p(L,w);!function(t,n){t&&(t.innerHTML=n)}(b,t.mazeMarkup),A=t.newMaze})),m.addEventListener("click",(function(){m.disabled=!0;for(var t=!1;!t;)t=l(A);m.disabled=!1}))})();