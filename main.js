(()=>{"use strict";function t(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function r(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function e(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function n(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,a=[],i=!0,c=!1;try{for(e=e.call(t);!(i=(n=e.next()).done)&&(a.push(n.value),!r||a.length!==r);i=!0);}catch(t){c=!0,o=t}finally{try{i||null==e.return||e.return()}finally{if(c)throw o}}return a}}(t,r)||e(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,r,e,n){var o=n[t].split("");o[r]=e,n[t]=o.join("")}function a(r,e){var a=e.startPosition,i=e.startDirection,c=e.coordList,s=e.currentWay,u=e.listOfCrosses,l=e.prev,f=e.isEscaped,p=e.crossingsParamArray;if(f)return{startPosition:a,startDirection:i,coordList:c,currentWay:s,listOfCrosses:u,crossingsParamArray:p,prev:l,isEscaped:f};var d,h,v,y,g,m=function(t,r,e,a){var i=function(t,r,e){var n=[];return e[t+1]&&" "===e[t+1][r]&&(n.push([t+1,r]),o(t+1,r,"v",e)),e[t-1]&&" "===e[t-1][r]&&(n.push([t-1,r]),o(t-1,r,"^",e))," "===e[t][r+1]&&(n.push([t,r+1]),o(t,r+1,">",e))," "===e[t][r-1]&&(n.push([t,r-1]),o(t,r-1,"<",e)),n}(e,a,t);if(!i.length)return{nextStep:[],nextDirection:">",resultLOg:[]};var c,s,u,l,f,p=n(i[0],2),d=(c=[e,a],s=[p[0],p[1]],l=[],f=">",c[0]>s[0]&&(f="^"),c[0]<s[0]&&(f="v"),c[1]>s[1]&&(f="<"),c[1]<s[1]&&(f=">"),(u=r)===f?l.push("F"):">"===u?("<"===f&&l.push("B","F"),"^"===f&&l.push("L","F"),"v"===f&&l.push("R","F")):"<"===u?(">"===f&&l.push("B","F"),"v"===f&&l.push("L","F"),"^"===f&&l.push("R","F")):"v"===u?("^"===f&&l.push("B","F"),"<"===f&&l.push("R","F"),">"===f&&l.push("L","F")):"^"===u&&("v"===f&&l.push("B","F"),">"===f&&l.push("R","F"),"<"===f&&l.push("L","F")),{nextDirection:f,resultLOg:l});return{nextStep:i,nextDirection:d.nextDirection,resultLOg:d.resultLOg}}(r,i,a[0],a[1]),b=m.nextStep,w=m.nextDirection,O=m.resultLOg;if(a[1]===r[0].length-1||a[0]===r.length-1||0===a[0]||0===a[1])return s=s.concat(O),c.push([a[0],a[1]]),p.push(t({},a.toString(),{way:s,from:l,coord:c})),{startPosition:a,startDirection:i,coordList:c,currentWay:s,listOfCrosses:u,crossingsParamArray:p,prev:l,isEscaped:f=!0};if(b.length>1&&"string"!=typeof b){c.push([a[0],a[1]]);var j=b.splice(1,b.length-1);u=u.concat(j),p.push(t({},a.toString(),{way:s,from:l,coord:c})),s=[],c=[],l=a.toString()}if(s=s.concat(O),b.length)c.push([a[0],a[1]]),a=b[0],i=w;else{var L=u.shift();c=[],L&&(a=L,l=(d=i=r[L[0]][L[1]],h=a,v=[],y=h[1],g=h[0],">"===d&&(v=v.concat([g,y-1])),"<"===d&&(v=v.concat([g,y+1])),"^"===d&&(v=v.concat([g+1,y])),"v"===d&&(v=v.concat([g-1,y])),v).toString()),s=[i]}return{startPosition:a,startDirection:i,coordList:c,currentWay:s,listOfCrosses:u,crossingsParamArray:p,prev:l,isEscaped:f}}function i(t){switch(t){case"#":return"wall";case"*":return"shortWayColor";case">":case"<":case"v":case"^":return"steps";case"horizontal":return"horizontal";case"vertical":return"vertical";default:return"empty"}}function c(t){return'<div class="mazeRow"><div class="mazeRow" style="grid-template-columns: repeat('.concat(t[0].length+1,',15px); ">\n  ').concat(Array(t[0].length).fill(0).map((function(t,r){var e="";return 0===r&&(e="<div> </div>"),"".concat(e,"<div  class=").concat(i("vertical"),">").concat(r+1,"</div>")})).join(""),"</div>\n  ").concat(t.map((function(r,e){return'<div class="mazeRow" style="grid-template-columns: repeat('.concat(t[0].length+1,',15px); ">').concat(r.split("").map((function(t,r){var n="";return 0===r&&(n="<div class=".concat(i("horizontal"),">").concat(e+1,"</div>")),"".concat(n,"<div class=").concat(i(t),">").concat(t||".","</div>")})).join(""),"</div>")})).join(""),"</div>")}function s(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||e(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t){var r=Math.ceil(Math.random()*t);return r%2==0&&r++,0===r&&r++,r>=t&&(r=t-2),r}function l(t,r,e){var o=n(r,2),a=o[0],i=o[1];return r[0]>e[0]&&t[a-1]&&(t[a-1][i]=" "),r[0]<e[0]&&t[a+1]&&(t[a+1][i]=" "),r[1]>e[1]&&t[a][i-1]&&(t[a][i-1]=" "),r[1]<e[1]&&t[a][i+1]&&(t[a][i+1]=" "),t}function f(t,r){var e=n(r,2),o=e[0],a=e[1],i=[];return t[o+2]&&" "===t[o+2][a]&&o+2!==t.length-1&&o+2!==0&&i.push([o+2,a]),t[o-2]&&" "===t[o-2][a]&&o-2!=t.length-1&&o-2!=0&&i.push([o-2,a]),t[o][a+2]&&" "===t[o][a+2]&&a+2!==t[o].length-1&&a+2!==0&&i.push([o,a+2]),t[o][a-2]&&" "===t[o][a-2]&&a-2!=t[o].length-1&&a-2!=0&&i.push([o,a-2]),i}function p(t,r){var e=function(t){for(var r,e,n=[1,1],o=n,a=[n];a.length;){t[o[0]][o[1]]="*";var i=f(t,o);if(0!==i.length){i.length>1&&a.push(o);var c=(void 0,e=(r=i).length,r[Math.floor(Math.random()*e)]);l(t,o,c),o=c}else o=a.shift()}return t[u(t.length)][1]=">",t.map((function(t){return t.join("").replaceAll("*"," ")}))}(function(t,r){var e=2*t+1,n=2*r+1,o=Array(n).fill(""),a=u(n);return o.map((function(t,r,n){return 0===r||r===n.length-1||r%2==0?Array(e).fill("#"):Array(e).fill(" ").map((function(t,n,o){return r===a&&n===e-1?" ":n%2==0||0===n||n===o.length-1?"#":"".concat(t)}))}))}(t,r));return{newMaze:e,mazeMarkup:c(e)}}function d(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function h(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){t(r,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))}))}return r}var v=document.getElementById("heigth"),y=document.getElementById("width"),g=document.getElementById("start"),m=document.getElementById("generateNewMaze"),b=document.getElementById("currenSize"),w=document.getElementById("maze"),O=+v.value,j=+y.value,L=p(O,j),A=L.newMaze,P=L.mazeMarkup,E=window.structuredClone(A);w&&(w.innerHTML=P),b.innerHTML="height: ".concat(O," x width: ").concat(j),m.addEventListener("click",(function(){O=+v.value,j=+y.value,b.innerHTML="height: ".concat(O," x width: ").concat(j);var t=p(O,j);!function(t,r){t&&(t.innerHTML=r)}(w,t.mazeMarkup),E=window.structuredClone(t.newMaze),g.disabled=!1})),g.addEventListener("click",(function(){g.disabled=!0,m.disabled=!0;for(var t=h(h(h({},function(t){for(var r=["<","^",">","v"],e=[0,0],n=">",o=0;o<t.length;o++)for(var a=0;a<t[o].length;a++){if(r.indexOf(t[o][a])>=0){e=[o,a],n=t[o][a];break}if(n)break}return{startPosition:e,startDirection:n}}(E)),{coordList:[],currentWay:[],listOfCrosses:[],crossingsParamArray:[{start:{way:[],from:null,coord:[]}}],prev:"start"}),{},{isEscaped:!1});!t.isEscaped;){t=a(E,t);var r=c(E);w&&(w.innerHTML=r)}if(t.isEscaped){var e=t.crossingsParamArray,o=window.structuredClone(E);(function(t,r,e){var o=function(t){for(var r=t.pop(),e=Object.keys(r)[0],n=r[e].from,o=r[e].coord,a=s(o);n;)r=t.find((function(t){return!!n&&t[n]})),e=Object.keys(r)[0],n=r[e].from,o=r[e].coord,a.unshift.apply(a,s(o));return a}(t),a=setInterval((function(){if(o.length){var t=n(o.shift(),2),i=t[0],s=t[1],u=e[i].split("");u[s]="*",e[i]=u.join("");var l=c(e);r&&(r.innerHTML=l)}else clearInterval(a)}),25)})(e,w,o),m.disabled=!1}}))})();