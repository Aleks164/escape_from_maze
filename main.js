(()=>{"use strict";function t(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function r(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}function n(t,n){if(t){if("string"==typeof t)return r(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(t,n):void 0}}function e(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var e,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(e=n.next()).done)&&(i.push(e.value),!r||i.length!==r);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(t,r)||n(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,r,n,e){var o=e[t].split("");o[r]=n,e[t]=o.join("")}function i(t){switch(t){case"#":return"wall";case"*":return"shortWayColor";case">":case"<":case"v":case"^":return"steps";case"horizontal":return"horizontal";case"vertical":return"vertical";default:return"empty"}}function a(t){return'<div class="mazeRow"><div class="mazeRow" style="grid-template-columns: repeat('.concat(t[0].length+1,',15px); ">\n  ').concat(Array(t[0].length).fill(0).map((function(t,r){var n="";return 0===r&&(n="<div> </div>"),"".concat(n,"<div  class=").concat(i("vertical"),">").concat(r+1,"</div>")})).join(""),"</div>\n  ").concat(t.map((function(r,n){return'<div class="mazeRow" style="grid-template-columns: repeat('.concat(t[0].length+1,',15px); ">').concat(r.split("").map((function(t,r){var e="";return 0===r&&(e="<div class=".concat(i("horizontal"),">").concat(n+1,"</div>")),"".concat(e,"<div class=").concat(i(t),">").concat(t||".","</div>")})).join(""),"</div>")})).join(""),"</div>")}function s(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var c,u,l;function f(){var r=getStartPosition(c);if(startPosition=r.startPosition,startDirection=r.startDirection,!l){var n,i,f,h,p,v=function(t,r,n,i){var a=function(t,r,n){var e=[];return n[t+1]&&" "===n[t+1][r]&&(e.push([t+1,r]),o(t+1,r,"v",n)),n[t-1]&&" "===n[t-1][r]&&(e.push([t-1,r]),o(t-1,r,"^",n))," "===n[t][r+1]&&(e.push([t,r+1]),o(t,r+1,">",n))," "===n[t][r-1]&&(e.push([t,r-1]),o(t,r-1,"<",n)),e}(n,i,t);if(!a.length)return{nextStep:[],nextDirection:"",resultLOg:[]};var s,c,u,l,f,h=e(a[0],2),p=(s=[n,i],c=[h[0],h[1]],l=[],f="",s[0]>c[0]&&(f="^"),s[0]<c[0]&&(f="v"),s[1]>c[1]&&(f="<"),s[1]<c[1]&&(f=">"),(u=r)===f?l.push("F"):">"===u?("<"===f&&l.push("B","F"),"^"===f&&l.push("L","F"),"v"===f&&l.push("R","F")):"<"===u?(">"===f&&l.push("B","F"),"v"===f&&l.push("L","F"),"^"===f&&l.push("R","F")):"v"===u?("^"===f&&l.push("B","F"),"<"===f&&l.push("R","F"),">"===f&&l.push("L","F")):"^"===u&&("v"===f&&l.push("B","F"),">"===f&&l.push("R","F"),"<"===f&&l.push("L","F")),{nextDirection:f,resultLOg:l});return{nextStep:a,nextDirection:p.nextDirection,resultLOg:p.resultLOg}}(c,startDirection,startPosition[0],startPosition[1]),d=v.nextStep,y=v.nextDirection,m=v.resultLOg;if(console.log(d[0],d[1],coordList,startPosition[0],startPosition[1]),startPosition[1]===c[0].length-1||startPosition[0]===c.length-1||0===startPosition[0]||0===startPosition[1])return currentWay=currentWay.concat(m),coordList.push([startPosition[0],startPosition[1]]),crossingsParamArray.push(t({},startPosition.toString(),{way:currentWay,from:prev,coord:coordList})),function(t,r,n){var o=function(t){for(var r=t.pop(),n=Object.keys(r)[0],e=r[n].from,o=r[n].coord,i=s(o);e;)r=t.find((function(t){return t[e]})),n=Object.keys(r)[0],e=r[n].from,o=r[n].coord,i.unshift.apply(i,s(o));return i}(t),i=setInterval((function(){if(console.log(i),o.length){var t=e(o.shift(),2),s=t[0],c=t[1],u=n[s].split("");u[c]="*",n[s]=u.join("");var l=a(n);r&&(r.innerHTML=l)}else clearInterval(i)}),25)}(m),void(l=!0);if(d.length>1&&"string"!=typeof d){coordList.push([startPosition[0],startPosition[1]]);var g=d.splice(1,d.length-1);listOfCrosses=listOfCrosses.concat(g),crossingsParamArray.push(t({},startPosition.toString(),{way:currentWay,from:prev,coord:coordList})),currentWay=[],coordList=[],prev=startPosition.toString()}if(currentWay=currentWay.concat(m),d.length)coordList.push([startPosition[0],startPosition[1]]),startPosition=d[0],startDirection=y;else{var P=listOfCrosses.shift();coordList=[],P&&(startPosition=P,startDirection=c[P[0]][P[1]],prev=(n=startDirection,i=startPosition,f=[],h=i[1],p=i[0],">"===n&&(f=f.concat([p,h-1])),"<"===n&&(f=f.concat([p,h+1])),"^"===n&&(f=f.concat([p+1,h])),"v"===n&&(f=f.concat([p-1,h])),f).toString()),currentWay=[startDirection]}u=a(c),mazeEl&&(mazeEl.innerHTML=u)}}function h(t){var r=Math.ceil(Math.random()*t);return r%2==0&&r++,0===r&&r++,r>=t&&(r=t-2),r}function p(t,r,n){var o=e(r,2),i=o[0],a=o[1];return r[0]>n[0]&&t[i-1]&&(t[i-1][a]=" "),r[0]<n[0]&&t[i+1]&&(t[i+1][a]=" "),r[1]>n[1]&&t[i][a-1]&&(t[i][a-1]=" "),r[1]<n[1]&&t[i][a+1]&&(t[i][a+1]=" "),t}function v(t,r){var n=e(r,2),o=n[0],i=n[1],a=[];return t[o+2]&&" "===t[o+2][i]&&o+2!==t.length-1&&o+2!==0&&a.push([o+2,i]),t[o-2]&&" "===t[o-2][i]&&o-2!=t.length-1&&o-2!=0&&a.push([o-2,i]),t[o][i+2]&&" "===t[o][i+2]&&i+2!==t[o].length-1&&i+2!==0&&a.push([o,i+2]),t[o][i-2]&&" "===t[o][i-2]&&i-2!=t[o].length-1&&i-2!=0&&a.push([o,i-2]),a}function d(t,r){var n=function(t){for(var r,n,e=[1,1],o=e,i=[e];i.length;){t[o[0]][o[1]]="*";var a=v(t,o);if(0!==a.length){a.length>1&&i.push(o);var s=(void 0,n=(r=a).length,r[Math.floor(Math.random()*n)]);p(t,o,s),o=s}else o=i.shift()}return t[h(t.length)][1]=">",t.map((function(t){return t.join("").replaceAll("*"," ")}))}(function(t,r){var n=2*t+1,e=2*r+1,o=Array(e).fill(""),i=h(e);return o.map((function(t,r,e){return 0===r||r===e.length-1||r%2==0?Array(n).fill("#"):Array(n).fill(" ").map((function(t,e,o){return r===i&&e===n-1?" ":e%2==0||0===e||e===o.length-1?"#":"".concat(t)}))}))}(t,r));return{newMaze:n,mazeMarkup:a(n)}}var y=document.getElementById("heigth"),m=document.getElementById("width"),g=document.getElementById("nextStepButton"),P=document.getElementById("generateNewMaze"),b=document.getElementById("currenSize"),L=document.getElementById("maze"),w=+y.value,z=+m.value,M=d(w,z),S=(M.newMaze,M.mazeMarkup);L&&(L.innerHTML=S),b.innerHTML="height: ".concat(w," x width: ").concat(z),P.addEventListener("click",(function(){var t=d(w,z);!function(t,r){t&&(t.innerHTML=r)}(L,t.mazeMarkup),t.newMaze,function(t){throw new TypeError('"newMaze" is read-only')}()})),g.addEventListener("click",(function(){g.disabled=!0;for(var t=!1;!t;)t=f();g.disabled=!1}))})();