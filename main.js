(()=>{"use strict";function t(t){var r=Math.ceil(Math.random()*t);return r%2==0&&r++,0===r&&r++,r>=t&&(r=t-2),r}function r(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function e(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function n(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,a,o=[],i=!0,c=!1;try{for(e=e.call(t);!(i=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);i=!0);}catch(t){c=!0,a=t}finally{try{i||null==e.return||e.return()}finally{if(c)throw a}}return o}}(t,r)||e(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,r,e){var a=n(r,2),o=a[0],i=a[1];return r[0]>e[0]&&t[o-1]&&(t[o-1][i]=" "),r[0]<e[0]&&t[o+1]&&(t[o+1][i]=" "),r[1]>e[1]&&t[o][i-1]&&(t[o][i-1]=" "),r[1]<e[1]&&t[o][i+1]&&(t[o][i+1]=" "),t}function o(t,r){var e=n(r,2),a=e[0],o=e[1],i=[];return t[a+2]&&" "===t[a+2][o]&&a+2!==t.length-1&&a+2!==0&&i.push([a+2,o]),t[a-2]&&" "===t[a-2][o]&&a-2!=t.length-1&&a-2!=0&&i.push([a-2,o]),t[a][o+2]&&" "===t[a][o+2]&&o+2!==t[a].length-1&&o+2!==0&&i.push([a,o+2]),t[a][o-2]&&" "===t[a][o-2]&&o-2!=t[a].length-1&&o-2!=0&&i.push([a,o-2]),i}function i(t){switch(t){case"#":return"wall";case"*":return"shortWayColor";case">":case"<":case"v":case"^":return"steps";case"horizontal":return"horizontal";case"vertical":return"vertical";default:return"empty"}}function c(t){return'<div class="mazeRow"><div class="mazeRow" style="grid-template-columns: repeat('.concat(t[0].length+1,',15px); ">\n  ').concat(Array(t[0].length).fill(0).map((function(t,r){var e="";return 0===r&&(e="<div> </div>"),"".concat(e,"<div  class=").concat(i("vertical"),">").concat(r+1,"</div>")})).join(""),"</div>\n  ").concat(t.map((function(r,e){return'<div class="mazeRow" style="grid-template-columns: repeat('.concat(t[0].length+1,',15px); ">').concat(r.split("").map((function(t,r){var n="";return 0===r&&(n="<div class=".concat(i("horizontal"),">").concat(e+1,"</div>")),"".concat(n,"<div class=").concat(i(t),">").concat(t||".","</div>")})).join(""),"</div>")})).join(""),"</div>")}function s(r){var e=document.getElementById("heigth"),n=document.getElementById("width"),i=document.getElementById("currenSize"),s=+e.value,u=+n.value;i.innerHTML="height: ".concat(s," x width: ").concat(u);var l=function(r,e){var n=function(r){for(var e,n,i=[1,1],c=i,s=[i];s.length;){r[c[0]][c[1]]="*";var u=o(r,c);if(0!==u.length){u.length>1&&s.push(c);var l=(n=(e=u).length,e[Math.floor(Math.random()*n)]);a(r,c,l),c=l}else c=s.shift()}return r[t(r.length)][1]=">",r.map((function(t){return t.join("").replaceAll("*"," ")}))}(function(r,e){var n=2*r+1,a=2*e+1,o=Array(a).fill(""),i=t(a);return o.map((function(t,r,e){return 0===r||r===e.length-1||r%2==0?Array(n).fill("#"):Array(n).fill(" ").map((function(t,e,a){return r===i&&e===n-1?" ":e%2==0||0===e||e===a.length-1?"#":"".concat(t)}))}))}(r,e));return{newMaze:n,mazeMarkup:c(n)}}(s,u),f=l.newMaze,p=l.mazeMarkup,d=window.structuredClone(f);return r&&(r.innerHTML=p),{mazeMap:d}}function u(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function l(t,r,e,n){var a=n[t].split("");a[r]=e,n[t]=a.join("")}function f(t,r){var e=r.startPosition,a=r.startDirection,o=r.coordList,i=r.currentWay,c=r.listOfCrosses,s=r.prev,f=r.isEscaped,p=r.crossingsParamArray;if(f)return{startPosition:e,startDirection:a,coordList:o,currentWay:i,listOfCrosses:c,crossingsParamArray:p,prev:s,isEscaped:f};var d,h,v,y,m,g=function(t,r,e,a){var o=function(t,r,e){var n=[];return e[t+1]&&" "===e[t+1][r]&&(n.push([t+1,r]),l(t+1,r,"v",e)),e[t-1]&&" "===e[t-1][r]&&(n.push([t-1,r]),l(t-1,r,"^",e))," "===e[t][r+1]&&(n.push([t,r+1]),l(t,r+1,">",e))," "===e[t][r-1]&&(n.push([t,r-1]),l(t,r-1,"<",e)),n}(e,a,t);if(!o.length)return{nextStep:[],nextDirection:"",resultLOg:[]};var i,c,s,u,f,p=n(o[0],2),d=(i=[e,a],c=[p[0],p[1]],u=[],f=">",i[0]>c[0]&&(f="^"),i[0]<c[0]&&(f="v"),i[1]>c[1]&&(f="<"),i[1]<c[1]&&(f=">"),(s=r)===f?u.push("F"):">"===s?("<"===f&&u.push("B","F"),"^"===f&&u.push("L","F"),"v"===f&&u.push("R","F")):"<"===s?(">"===f&&u.push("B","F"),"v"===f&&u.push("L","F"),"^"===f&&u.push("R","F")):"v"===s?("^"===f&&u.push("B","F"),"<"===f&&u.push("R","F"),">"===f&&u.push("L","F")):"^"===s&&("v"===f&&u.push("B","F"),">"===f&&u.push("R","F"),"<"===f&&u.push("L","F")),{nextDirection:f,resultLOg:u});return{nextStep:o,nextDirection:d.nextDirection,resultLOg:d.resultLOg}}(t,a,e[0],e[1]),b=g.nextStep,O=g.nextDirection,w=g.resultLOg;if(e[1]===t[0].length-1||e[0]===t.length-1||0===e[0]||0===e[1])return i=i.concat(w),o.push([e[0],e[1]]),p.push(u({},e.toString(),{way:i,from:s,coord:o})),{startPosition:e,startDirection:a,coordList:o,currentWay:i,listOfCrosses:c,crossingsParamArray:p,prev:s,isEscaped:f=!0};if(b.length>1&&"string"!=typeof b){o.push([e[0],e[1]]);var j=b.splice(1,b.length-1);c=c.concat(j),p.push(u({},e.toString(),{way:i,from:s,coord:o})),i=[],o=[],s=e.toString()}if(i=i.concat(w),b.length)o.push([e[0],e[1]]),e=b[0],a=O;else{var A=c.shift();o=[],A&&(e=A,s=(d=a=t[A[0]][A[1]],h=e,v=[],y=h[1],m=h[0],">"===d&&(v=v.concat([m,y-1])),"<"===d&&(v=v.concat([m,y+1])),"^"===d&&(v=v.concat([m+1,y])),"v"===d&&(v=v.concat([m-1,y])),v).toString()),i=[a]}return{startPosition:e,startDirection:a,coordList:o,currentWay:i,listOfCrosses:c,crossingsParamArray:p,prev:s,isEscaped:f}}function p(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||e(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function h(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?d(Object(e),!0).forEach((function(r){u(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):d(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}var v=document.getElementById("start"),y=document.getElementById("generateNewMaze"),m=document.getElementById("maze"),g=s(m).mazeMap;y.addEventListener("click",(function(){var t=s(m);g=t.mazeMap,v.disabled=!1})),v.addEventListener("click",(function(){v.disabled=!0,y.disabled=!0,function(t,r,e){for(var a=h(h(h({},function(t){for(var r=["<","^",">","v"],e=[0,0],n="",a=0;a<t.length;a++)for(var o=0;o<t[a].length;o++){if(r.indexOf(t[a][o])>=0){e=[a,o],n=t[a][o];break}if(n)break}return{startPosition:e,startDirection:n}}(t)),{coordList:[],currentWay:[],listOfCrosses:[],crossingsParamArray:[{start:{way:[],from:null,coord:[]}}],prev:"start"}),{},{isEscaped:!1});!a.isEscaped;){a=f(t,a);var o=c(t);r&&(r.innerHTML=o)}var i,s,u,l,d;a.isEscaped&&(i=a.crossingsParamArray,s=r,u=window.structuredClone(t),l=function(t){for(var r=t.pop(),e=Object.keys(r)[0],n=r[e].from,a=r[e].coord,o=p(a);n;)r=t.find((function(t){return!!n&&t[n]})),e=Object.keys(r)[0],n=r[e].from,a=r[e].coord,o.unshift.apply(o,p(a));return o}(i),d=setInterval((function(){if(l.length){var t=n(l.shift(),2),r=t[0],e=t[1],a=u[r].split("");a[e]="*",u[r]=a.join("");var o=c(u);s&&(s.innerHTML=o)}else clearInterval(d)}),25),e.disabled=!1)}(g,m,y)}))})();