(()=>{"use strict";function t(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function n(n,e){if(n){if("string"==typeof n)return t(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(n,e):void 0}}function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var r,o,a=[],i=!0,c=!1;try{for(e=e.call(t);!(i=(r=e.next()).done)&&(a.push(r.value),!n||a.length!==n);i=!0);}catch(t){c=!0,o=t}finally{try{i||null==e.return||e.return()}finally{if(c)throw o}}return a}}(t,e)||n(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function o(t,n,e,r){var o=r[t].split("");o[n]=e,r[t]=o.join("")}function a(t){return'<div class="mazeRow"><div class="mazeRow" style="grid-template-columns: repeat('.concat(t[0].length+1,',15px); ">\n  ').concat(Array(t[0].length).fill(0).map((function(t,n){var e="";return 0===n&&(e="<div> </div>"),"".concat(e,"<div  class=").concat(i("vertical"),">").concat(n+1,"</div>")})).join(""),"</div>\n  ").concat(t.map((function(n,e){return'<div class="mazeRow" style="grid-template-columns: repeat('.concat(t[0].length+1,',15px); ">').concat(n.split("").map((function(t,n){var r="";return 0==n&&(r="<div class=".concat(i("horizontal"),">").concat(e+1,"</div>")),"".concat(r,"<div class=").concat(i(t),">").concat(t||".","</div>")})).join(""),"</div>")})).join(""),"</div>")}function i(t){switch(t){case"#":return"wall";case"*":return"shortWayColor";case">":case"<":case"v":case"^":return"steps";case"horizontal":return"horizontal";case"vertical":return"vertical";default:return"empty"}}function c(e){return function(n){if(Array.isArray(n))return t(n)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t){var n=Math.ceil(Math.random()*t);return n%2==0&&n++,0===n&&n++,n>=t&&(n=t-2),n}function l(t,n,r){var o=e(n,2),a=o[0],i=o[1];return n[0]>r[0]&&t[a-1]&&(t[a-1][i]=" "),n[0]<r[0]&&t[a+1]&&(t[a+1][i]=" "),n[1]>r[1]&&t[a][i-1]&&(t[a][i-1]=" "),n[1]<r[1]&&t[a][i+1]&&(t[a][i+1]=" "),t}function s(t,n){var r=e(n,2),o=r[0],a=r[1],i=[];return t[o+2]&&" "===t[o+2][a]&&o+2!==t.length-1&&o+2!==0&&i.push([o+2,a]),t[o-2]&&" "===t[o-2][a]&&o-2!=t.length-1&&o-2!=0&&i.push([o-2,a]),t[o][a+2]&&" "===t[o][a+2]&&a+2!==t[o].length-1&&a+2!==0&&i.push([o,a+2]),t[o][a-2]&&" "===t[o][a-2]&&a-2!=t[o].length-1&&a-2!=0&&i.push([o,a-2]),i}var f,h,v,p,d,g,m,y,b,w,S,L=document.getElementById("maze");function x(){d=[],g=[],m=[],y=[{start:{way:[],from:null,coord:[]}}],b="start",S=!1}function A(t,n){x(),f=function(t){for(var n,e,r=[1,1],o=r,a=[r];a.length;){t[o[0]][o[1]]="*";var i=s(t,o);if(0!==i.length){i.length>1&&a.push(o);var c=(void 0,e=(n=i).length,n[Math.floor(Math.random()*e)]);l(t,o,c),o=c}else o=a.shift()}return t[u(t.length)][1]=">",t.map((function(t){return t.join("").replaceAll("*"," ")}))}(function(t,n){var e=2*t+1,r=2*n+1,o=Array(r).fill(""),a=u(r);return o.map((function(t,n,r){return 0===n||n===r.length-1||n%2==0?Array(e).fill("#"):Array(e).fill(" ").map((function(t,r,o){return n===a&&r===e-1?" ":r%2==0||0===r||r===o.length-1?"#":"".concat(t)}))}))}(t,n)),h=f.slice(),w=a(h),L&&(L.innerHTML=w);var e=function(t){for(var n=0,e=0,r=["<","^",">","v"],o="",a=0;a<t.length;a++)for(var i=0;i<t[a].length;i++){if(r.indexOf(t[a][i])>=0){n=i,e=a,o=t[a][i];break}if(o)break}return{startPosition:[e,n],startDirection:o}}(h);v=e.startPosition,p=e.startDirection}function j(){if(!S){var t,n,i,u,l,s=function(t,n,r,a){var i=function(t,n,e){var r=[];return e[t+1]&&" "===e[t+1][n]&&(r.push([t+1,n]),o(t+1,n,"v",e)),e[t-1]&&" "===e[t-1][n]&&(r.push([t-1,n]),o(t-1,n,"^",e))," "===e[t][n+1]&&(r.push([t,n+1]),o(t,n+1,">",e))," "===e[t][n-1]&&(r.push([t,n-1]),o(t,n-1,"<",e)),r}(r,a,t);if(!i.length)return{nextStep:[],nextDirection:"",resultLOg:[]};var c,u,l,s,f,h=e(i[0],2),v=(c=[r,a],u=[h[0],h[1]],s=[],f="",c[0]>u[0]&&(f="^"),c[0]<u[0]&&(f="v"),c[1]>u[1]&&(f="<"),c[1]<u[1]&&(f=">"),(l=n)===f?s.push("F"):">"===l?("<"===f&&s.push("B","F"),"^"===f&&s.push("L","F"),"v"===f&&s.push("R","F")):"<"===l?(">"===f&&s.push("B","F"),"v"===f&&s.push("L","F"),"^"===f&&s.push("R","F")):"v"===l?("^"===f&&s.push("B","F"),"<"===f&&s.push("R","F"),">"===f&&s.push("L","F")):"^"===l&&("v"===f&&s.push("B","F"),">"===f&&s.push("R","F"),"<"===f&&s.push("L","F")),{nextDirection:f,resultLOg:s});return{nextStep:i,nextDirection:v.nextDirection,resultLOg:v.resultLOg}}(h,p,v[0],v[1]),x=s.nextStep,A=s.nextDirection,j=s.resultLOg;if(console.log(x[0],x[1],d,v[0],v[1]),v[1]===h[0].length-1||v[0]===h.length-1||0===v[0]||0===v[1])return function(t){g=g.concat(t),d.push([v[0],v[1]]),y.push(r({},v.toString(),{way:g,from:b,coord:d}));var n=function(t){for(var n=t.pop(),e=Object.keys(n)[0],r=n[e].from,o=n[e].coord,a=c(o);r;)n=t.find((function(t){return t[r]})),e=Object.keys(n)[0],r=n[e].from,o=n[e].coord,a.unshift.apply(a,c(o));return a}(y),o=setInterval((function(){if(console.log(o),n.length){var t=e(n.shift(),2),r=t[0],i=t[1],c=f[r].split("");c[i]="*",f[r]=c.join(""),w=a(f),L&&(L.innerHTML=w)}else clearInterval(o)}),25)}(j),void(S=!0);if(x.length>1&&"string"!=typeof x){d.push([v[0],v[1]]);var F=x.splice(1,x.length-1);m=m.concat(F),y.push(r({},v.toString(),{way:g,from:b,coord:d})),g=[],d=[],b=v.toString()}if(g=g.concat(j),x.length)d.push([v[0],v[1]]),v=x[0],p=A;else{var I=m.shift();d=[],I&&(v=I,p=h[I[0]][I[1]],b=(t=p,n=v,i=[],u=n[1],l=n[0],">"===t&&(i=i.concat([l,u-1])),"<"===t&&(i=i.concat([l,u+1])),"^"===t&&(i=i.concat([l+1,u])),"v"===t&&(i=i.concat([l-1,u])),i).toString()),g=[p]}w=a(h),L&&(L.innerHTML=w)}}x();var F=document.getElementById("nextStepButton");F.addEventListener("click",(function(){for(F.disabled=!0;!S;)j();F.disabled=!1}));var I=document.getElementById("heigth"),B=document.getElementById("width"),M=document.getElementById("generateNewMaze"),O=document.getElementById("currenSize"),E=+I.value,z=+B.value;O.innerHTML="height: ".concat(E," x width: ").concat(z),A(E,z),M.addEventListener("click",(function(){E=+I.value,z=+B.value,A(E,z),O.innerHTML="height: ".concat(E," x width: ").concat(z)}))})();