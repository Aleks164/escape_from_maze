(()=>{"use strict";var t;function n(t){var n=Math.ceil(Math.random()*t);return n%2==0&&n++,0===n&&n++,n>=t&&(n=t-2),n}function r(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}function e(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var e,a,o=[],c=!0,l=!1;try{for(r=r.call(t);!(c=(e=r.next()).done)&&(o.push(e.value),!n||o.length!==n);c=!0);}catch(t){l=!0,a=t}finally{try{c||null==r.return||r.return()}finally{if(l)throw a}}return o}}(t,n)||function(t,n){if(t){if("string"==typeof t)return r(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,n,r){var a=e(n,2),o=a[0],c=a[1];return n[0]>r[0]&&t[o-1]&&(t[o-1][c]=" "),n[0]<r[0]&&t[o+1]&&(t[o+1][c]=" "),n[1]>r[1]&&t[o][c-1]&&(t[o][c-1]=" "),n[1]<r[1]&&t[o][c+1]&&(t[o][c+1]=" "),t}function o(t,n){var r=e(n,2),a=r[0],o=r[1],c=[];return t[a+2]&&" "===t[a+2][o]&&a+2!==t.length-1&&a+2!==0&&c.push([a+2,o]),t[a-2]&&" "===t[a-2][o]&&a-2!=t.length-1&&a-2!=0&&c.push([a-2,o]),t[a][o+2]&&" "===t[a][o+2]&&o+2!==t[a].length-1&&o+2!==0&&c.push([a,o+2]),t[a][o-2]&&" "===t[a][o-2]&&o-2!=t[a].length-1&&o-2!=0&&c.push([a,o-2]),c}function c(t){switch(t){case"#":return"wall";case"*":return"shortWayColor";case">":case"<":case"v":case"^":return"steps";case"horizontal":return"horizontal";case"vertical":return"vertical";default:return"empty"}}function l(t,r){var e,l=function(t){for(var r,e,c=[1,1],l=c,i=[c];i.length;){t[l[0]][l[1]]="*";var u=o(t,l);if(0!==u.length){u.length>1&&i.push(l);var s=(void 0,e=(r=u).length,r[Math.floor(Math.random()*e)]);a(t,l,s),l=s}else l=i.shift()}return t[n(t.length)][1]=">",t.map((function(t){return t.join("").replaceAll("*"," ")}))}(function(t,r){var e=2*t+1,a=2*r+1,o=Array(a).fill(""),c=n(a);return o.map((function(t,n,r){return 0===n||n===r.length-1||n%2==0?Array(e).fill("#"):Array(e).fill(" ").map((function(t,r,a){return n===c&&r===e-1?" ":r%2==0||0===r||r===a.length-1?"#":"".concat(t)}))}))}(t,r));return{newMaze:self.structuredClone(l),mazeMarkup:(e=l,'<div class="mazeRow"><div class="mazeRow" style="grid-template-columns: repeat('.concat(e[0].length+1,',15px); ">\n  ').concat(Array(e[0].length).fill(0).map((function(t,n){var r="";return 0===n&&(r="<div> </div>"),"".concat(r,"<div  class=").concat(c("vertical"),">").concat(n+1,"</div>")})).join(""),"</div>\n  ").concat(e.map((function(t,n){return'<div class="mazeRow" style="grid-template-columns: repeat('.concat(e[0].length+1,',15px); ">').concat(t.split("").map((function(t,r){var e="";return 0===r&&(e="<div class=".concat(c("horizontal"),">").concat(n+1,"</div>")),"".concat(e,"<div class=").concat(c(t),">").concat(t||".","</div>")})).join(""),"</div>")})).join(""),"</div>"))}}!function(t){t.DRAW_ESCAPING="drawEscaping",t.DRAW_NEW_MAZE="drawNewMaze"}(t||(t={})),self.onmessage=function(n){var r=n.data,e=r.mazeParams,a=r.type;switch(console.log(e),a){case t.DRAW_NEW_MAZE:var o=l(e.height,e.width).mazeMarkup;self.postMessage({mazeMarkup:o,type:a});break;case t.DRAW_ESCAPING:var c=l(e.height,e.width).newMaze;self.postMessage({newMaze:c,type:a})}}})();